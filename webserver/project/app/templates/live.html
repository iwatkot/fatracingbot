{% extends 'base.html' %}
{% block content %}
{% load static %}
<script>
  setInterval(function() {
    location.reload();
  }, 5 * 60 * 1000);
</script>
<main role='main' class='container-fluid'>
  {% if race_is_live %}
    <div class="row">
      <div class="col">
        <iframe src="{% static 'map.html' %}" width="100%" height="700px"></iframe>
      </div>
    <div class="col">
      <table class="table table-striped">
        <thead>
          <tr>
            <th scope="col">#</th>
            <th scope="col">Дистанция</th>
            <th scope="col">Категория</th>
            <th scope="col">Номер</th>
            <th scope="col">Имя</th>
          </tr>
        </thead>
        <tbody>
          {% for row in leaderboard %}
          <tr>
            <th scope="row">{{ row.row_number }}</th>
            <td>{{ row.distance }}</td>
            <td>{{ row.category }}</td>
            <td>{{ row.race_number }}</td>
            <td>{{ row.full_name }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  {% else %}
  <div class="jumbotron">
    <h1 class="display-4">Сейчас не проводится гонок</h1>
    <p class="lead">В настоящее время нет активных гонок или геоданные от участников еще не получены.</p>
    <hr class="my-4">
    <p>Если гонка уже началась, то обновите эту страницу чуть позже.</p>
  </div>
  {% endif %}
</main>
{% endblock content %}